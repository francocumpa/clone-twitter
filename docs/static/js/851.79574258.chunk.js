"use strict";(self.webpackChunkclone_twitter=self.webpackChunkclone_twitter||[]).push([[851],{7578:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var n=s(5043),r=s(1881),o=s(3216),l=s(8060),t=s(5205),u=s(3084),c=s(7485),i=s(5114),d=s(901),h=s(7587);const m=s.p+"static/media/bgLogin.5daa9b891e58977e7900.jpg",p=e=>{const[a,s]=(0,n.useState)({values:Object.keys(e).reduce(((e,a)=>e={...e,[a]:""}),{}),touched:Object.keys(e).reduce(((e,a)=>e={...e,[a]:!1}),{}),errors:Object.keys(e).reduce(((e,a)=>e={...e,[a]:!0}),{}),initialValues:Object.keys(e).reduce(((e,a)=>e={...e,[a]:""}),{})});return[{values:a.values,errors:a.errors,touched:a.touched,handleErrors:Object.keys(a.initialValues).some((e=>a.errors[e])),handleReset:()=>{s((e=>({...e,values:e.initialValues,touched:Object.keys(e.touched).reduce(((e,a)=>e={...e,[a]:!1}),{}),errors:Object.keys(e.errors).reduce(((e,a)=>e={...e,[a]:!0}),{})})))},handleTouched:e=>{let{target:{name:a}}=e;s((e=>({...e,touched:{...e.touched,[a]:!0}})))},handleChange:e=>{let{target:{name:a,value:n}}=e;s((e=>({...e,values:{...e.values,[a]:n},errors:{...e.errors,[a]:0===(n||"").length},touched:{...e.touched,[a]:!0}})))}}]};var g=s(264),A=s(681),j=s(342),v=s(579);const x=()=>{const e=(0,o.Zp)(),{setUser:a}=(0,j.A)(),[s]=(0,r.n)(g.zv),[x]=(0,r.n)(g.ti),[w,b]=(0,n.useState)(!1),[C,R]=(0,n.useState)({status:null,header:null,message:null}),[E]=p({email:"",password:""}),[y]=p({name:"",username:"",email:"",password:""}),k=()=>"SUCCESS"===C.status?(0,v.jsx)(l.A,{textAlign:"center",children:(0,v.jsx)(t.A,{compact:!0,success:!0,header:C.header,content:C.message})}):"ERROR"===C.status?(0,v.jsx)(l.A,{textAlign:"center",children:(0,v.jsx)(t.A,{compact:!0,error:!0,header:C.header,content:C.message})}):null;console.log(E);const O=()=>{b(!w)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.A,{columns:2,className:"login",children:(0,v.jsxs)(u.A.Row,{children:[(0,v.jsx)(u.A.Column,{children:(0,v.jsx)(c.A,{src:m,className:"img"})}),(0,v.jsxs)(u.A.Column,{verticalAlign:"middle",children:[(0,v.jsx)(k,{}),(0,v.jsxs)(i.A,{onSubmit:async s=>{if(s.preventDefault(),E.handleErrors)console.log("error"),R({status:"ERROR",header:"Faltan campos por llenar",message:"El campo email o contrasenia se encuentran vacios"});else try{const s=await x({variables:{input:E.values}}),{data:{authentication:{token:n}}}=s;A.A.set("token",n),a(n),e("/home"),console.log(n),console.log("all good"),R({status:"SUCCESS",header:"Datos llenados exitosamente",message:"Espere unos segundos por favor"})}catch(n){R({status:"ERROR",header:"Ocurrio un error",message:n.message})}},children:[(0,v.jsx)(i.A.Field,{className:"",children:(0,v.jsx)(i.A.Input,{name:"email",label:"Email",placeholder:"Email",onBlur:E.handleTouched,onChange:E.handleChange,value:E.values.email,error:E.touched.email&&E.errors.email?{content:"tu correo esta mal escrito",pointing:"below"}:null})}),(0,v.jsx)(i.A.Field,{className:"",children:(0,v.jsx)(i.A.Input,{name:"password",onBlur:E.handleTouched,onChange:E.handleChange,value:E.password,label:"Password",placeholder:"Password",type:"password",error:E.touched.password&&E.errors.password?{content:"tu password esta mal escrito",pointing:"below"}:null})}),(0,v.jsx)(d.A,{primary:!0,floated:"left",children:"Ingresar"}),(0,v.jsx)(d.A,{secondary:!0,floated:"right",onClick:O,children:"Registrarme"})]})]})]})}),(0,v.jsxs)(h.A,{closeOnEscape:!1,closeOnDimmerClick:!0,open:w,size:"mini",children:[(0,v.jsx)(h.A.Header,{children:"Registrar un nuevo usuario"}),(0,v.jsxs)(h.A.Content,{children:[(0,v.jsx)(k,{}),(0,v.jsxs)(i.A,{onSubmit:async e=>{if(e.preventDefault(),y.handleErrors)console.log("error"),R({status:"ERROR",header:"Faltan campos por llenar",message:"El campo email o contrasenia se encuentran vacios"});else try{await s({variables:{input:y.values}});O(),y.handleReset(),console.log("all good"),R({status:"SUCCESS",header:"Datos llenados exitosamente",message:"Espere unos segundos por favor ..."})}catch(a){R({status:"ERROR",header:"Ocurrio un error",message:a.message})}},children:[(0,v.jsx)(i.A.Field,{children:(0,v.jsx)(i.A.Input,{name:"name",label:"Nombre",onBlur:y.handleTouched,onChange:y.handleChange,value:y.values.name,error:E.touched.name&&y.errors.name?{content:"tu correo esta mal escrito",pointing:"below"}:null,placeholder:"Nombre"})}),(0,v.jsx)(i.A.Field,{children:(0,v.jsx)(i.A.Input,{name:"username",label:"Username",onBlur:y.handleTouched,onChange:y.handleChange,value:y.values.username,error:E.touched.username&&y.errors.username?{content:"tu correo esta mal escrito",pointing:"below"}:null,placeholder:"Username"})}),(0,v.jsx)(i.A.Field,{children:(0,v.jsx)(i.A.Input,{name:"email",label:"Email",onBlur:y.handleTouched,onChange:y.handleChange,value:y.values.email,error:E.touched.email&&y.errors.email?{content:"tu correo esta mal escrito",pointing:"below"}:null,placeholder:"Email"})}),(0,v.jsx)(i.A.Field,{children:(0,v.jsx)(i.A.Input,{name:"password",label:"Password",onBlur:y.handleTouched,onChange:y.handleChange,value:y.values.password,error:E.touched.password&&y.errors.password?{content:"tu correo esta mal escrito",pointing:"below"}:null,placeholder:"Password",type:"password"})}),(0,v.jsxs)(h.A.Actions,{children:[(0,v.jsx)(d.A,{secondary:!0,onClick:()=>O(),children:"Cancelar"}),(0,v.jsx)(d.A,{primary:!0,type:"submit",children:"Registrar"})]})]})]})]})]})}},264:(e,a,s)=>{s.d(a,{ot:()=>i,ti:()=>c,zv:()=>u});var n,r,o,l=s(7528),t=s(459);const u=(0,t.J1)(n||(n=(0,l.A)(["\nmutation addUser($input: UserInput) {\nnewUser(input: $input) {\npassword\nusername\n}}"]))),c=(0,t.J1)(r||(r=(0,l.A)(["\nmutation logeandome($input: LoginInput) {\n  authentication (input: $input) {\n    token\n}}"]))),i=(0,t.J1)(o||(o=(0,l.A)(["\nmutation updateAvatar($input: AvatarInput) {\n  updateAvatar(input: $input) {\n    id\n}}"])))},342:(e,a,s)=>{s.d(a,{A:()=>o});var n=s(5043),r=s(1110);const o=()=>(0,n.useContext)(r.A)}}]);
//# sourceMappingURL=851.79574258.chunk.js.map